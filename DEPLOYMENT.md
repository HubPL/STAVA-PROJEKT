# ğŸš€ STAVA - Deployment Guide

## ğŸ“‹ Pre-deployment Checklist

### âœ… **Environment Variables Required:**

```bash
# Firebase Configuration
NEXT_PUBLIC_FIREBASE_API_KEY=your_firebase_api_key
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=stava-project.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=stava-project
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=stava-project.appspot.com
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=123456789
NEXT_PUBLIC_FIREBASE_APP_ID=1:123456789:web:abcdef

# Email (Resend API)
RESEND_API_KEY=re_xxxxxxxxxx
EMAIL_FROM=noreply@stavakiszewa.pl
EMAIL_ADMIN=kontakt@stavakiszewa.pl

# App Settings
NEXT_PUBLIC_APP_URL=https://stavakiszewa.pl
NEXT_PUBLIC_APP_NAME=STAVA Kiszewa

# SMS (Optional)
SMS_API_TOKEN=your_sms_token
ADMIN_PHONE=+48886627447
SMS_SENDER=STAVA

# Security
CLEANUP_API_KEY=secure_random_string_for_cleanup_cron
```

## ğŸ› ï¸ **Build Optimizations Applied:**

### Performance âš¡
- âœ… Lazy loading dla komponentÃ³w (CookieConsent, Lightbox, Calendar)
- âœ… Advanced Image optimization z Intersection Observer
- âœ… Bundle optimization (react-icons, date-fns)
- âœ… CSS optimization enabled
- âœ… SWC minification
- âœ… Production-safe logging

### SEO ğŸ“ˆ
- âœ… Complete meta tags na wszystkich stronach
- âœ… Structured data (Business, FAQ, Breadcrumbs)
- âœ… Optimized sitemap.xml
- âœ… Proper robots.txt
- âœ… Canonical URLs i hreflang
- âœ… OpenGraph i Twitter Cards

### Security ğŸ”’
- âœ… Security headers (CSP, HSTS, X-Frame-Options)
- âœ… Firebase rules properly configured
- âœ… API endpoints protected
- âœ… No exposed secrets in code

### Caching ğŸ“¦
- âœ… Image caching (1 year)
- âœ… Font caching (1 year)  
- âœ… API cache headers
- âœ… Browser caching optimized

## ğŸš€ **Deployment Steps:**

### 1. Vercel Deployment
```bash
# Install Vercel CLI
npm i -g vercel

# Deploy
vercel --prod

# Set environment variables
vercel env add NEXT_PUBLIC_FIREBASE_API_KEY
vercel env add RESEND_API_KEY
# ... (add all variables from list above)
```

### 2. Firebase Setup
```bash
# Make sure Firebase rules are deployed
firebase deploy --only firestore:rules
firebase deploy --only storage
```

### 3. DNS Configuration
- âœ… CNAME: www â†’ stavakiszewa.pl
- âœ… A record: @ â†’ Vercel IP
- âœ… SSL Certificate auto-generated by Vercel

### 4. Post-deployment Testing
- [ ] Test reservation flow
- [ ] Test admin panel login
- [ ] Test email sending
- [ ] Test image loading
- [ ] Test mobile responsiveness
- [ ] Run Lighthouse audit
- [ ] Check Google Search Console

## ğŸ“Š **Performance Targets:**

### Lighthouse Scores (Target):
- ğŸ¯ Performance: 90+
- ğŸ¯ Accessibility: 95+
- ğŸ¯ Best Practices: 95+
- ğŸ¯ SEO: 100

### Core Web Vitals:
- ğŸ¯ LCP (Largest Contentful Paint): < 2.5s
- ğŸ¯ FID (First Input Delay): < 100ms  
- ğŸ¯ CLS (Cumulative Layout Shift): < 0.1

## ğŸ”§ **Monitoring Setup:**

### 1. Error Tracking
- Vercel Analytics juÅ¼ skonfigurowane
- Vercel Speed Insights wÅ‚Ä…czone

### 2. Uptime Monitoring
- Set up external monitoring (UptimeRobot/Pingdom)
- Monitor critical endpoints:
  - `/` (homepage)
  - `/rezerwacja` (booking)
  - `/api/contact` (email API)

### 3. SEO Monitoring
- Google Search Console
- Google Analytics 4
- Monitor keyword rankings

## âš¡ **Performance Features Implemented:**

1. **Image Optimization:**
   - WebP/AVIF formats
   - Lazy loading with Intersection Observer
   - Proper sizing and compression

2. **Code Splitting:**
   - Dynamic imports for heavy components
   - Suspense boundaries
   - Bundle optimization

3. **Caching Strategy:**
   - Static assets: 1 year cache
   - API routes: no-cache
   - Images: immutable caching

4. **SEO Enhancements:**
   - Dynamic meta tags generator
   - Structured data helpers
   - Complete sitemap with priorities

## ğŸ› **Common Issues & Solutions:**

### Firebase Storage CORS
If images don't load:
```bash
gsutil cors set cors.json gs://your-bucket-name
```

### Email Delivery Issues
- Check Resend API key
- Verify sender domain
- Check DNS SPF/DKIM records

### Build Errors
- Clear `.next` folder: `rm -rf .next`
- Update dependencies: `npm update`
- Check environment variables

---

**ğŸ‰ Ready for production!** The app is optimized for performance, SEO, and security.